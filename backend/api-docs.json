{
  "openapi": "3.0.0",
  "info": {
    "title": "GDGoC API",
    "version": "1.0.0",
    "description": "Firebase Functions를 통한 이미지 및 멤버 CRUD API"
  },
  "servers": [
    {
      "url": "http://localhost:5001/website-7ee8f",
      "description": "Functions 서버"
    }
  ],
  "paths": {
    "/createImage": {
      "post": {
        "summary": "이미지 생성 및 업로드",
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "file"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "이미지 이름"
                  },
                  "description": {
                    "type": "string",
                    "description": "이미지 설명"
                  },
                  "file": {
                    "type": "string",
                    "format": "binary",
                    "description": "이미지 파일"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "이미지 생성 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/getImages": {
      "get": {
        "summary": "이미지 목록 조회",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/getImage/{imageId}": {
      "get": {
        "summary": "단일 이미지 조회",
        "parameters": [
          {
            "name": "imageId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/updateImage/{imageId}": {
      "put": {
        "summary": "이미지 업데이트",
        "parameters": [
          {
            "name": "imageId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "description": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/deleteImage/{imageId}": {
      "delete": {
        "summary": "이미지 삭제",
        "parameters": [
          {
            "name": "imageId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/createMember": {
      "post": {
        "summary": "멤버 생성",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "email",
                  "department",
                  "githubUsername"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "이름"
                  },
                  "email": {
                    "type": "string",
                    "description": "이메일"
                  },
                  "department": {
                    "type": "string",
                    "description": "학과"
                  },
                  "githubUsername": {
                    "type": "string",
                    "description": "GitHub 사용자명"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "멤버 생성 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/getMembers": {
      "get": {
        "summary": "멤버 목록 조회",
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/getMember/{memberId}": {
      "get": {
        "summary": "단일 멤버 조회",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/updateMember/{memberId}": {
      "put": {
        "summary": "멤버 업데이트",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "email": {
                    "type": "string"
                  },
                  "department": {
                    "type": "string"
                  },
                  "githubUsername": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/deleteMember/{memberId}": {
      "delete": {
        "summary": "멤버 삭제",
        "parameters": [
          {
            "name": "memberId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/getSeminars": {
      "get": {
        "summary": "세미나 목록 조회",
        "parameters": [
          {
            "name": "semester",
            "in": "query",
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "type",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "invited",
                "internal"
              ]
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 10,
              "maximum": 50
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/getSeminar/{seminarId}": {
      "get": {
        "summary": "단일 세미나 조회",
        "parameters": [
          {
            "name": "seminarId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/createSeminar": {
      "post": {
        "summary": "세미나 생성 (관리자 전용)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "adminId",
                  "title",
                  "summary",
                  "semester",
                  "type",
                  "contentMd"
                ],
                "properties": {
                  "adminId": {
                    "type": "string",
                    "description": "관리자 ID"
                  },
                  "title": {
                    "type": "string"
                  },
                  "summary": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "invited",
                      "internal"
                    ]
                  },
                  "semester": {
                    "type": "string"
                  },
                  "date": {
                    "type": "string"
                  },
                  "speaker": {
                    "type": "string"
                  },
                  "affiliation": {
                    "type": "string"
                  },
                  "location": {
                    "type": "string"
                  },
                  "contentMd": {
                    "type": "string"
                  },
                  "attachmentUrls": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "coverImageId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "세미나 생성 성공"
          }
        }
      }
    },
    "/updateSeminar/{seminarId}": {
      "put": {
        "summary": "세미나 업데이트 (관리자 전용)",
        "parameters": [
          {
            "name": "seminarId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "adminId"
                ],
                "properties": {
                  "adminId": {
                    "type": "string"
                  },
                  "title": {
                    "type": "string"
                  },
                  "summary": {
                    "type": "string"
                  },
                  "type": {
                    "type": "string",
                    "enum": [
                      "invited",
                      "internal"
                    ]
                  },
                  "semester": {
                    "type": "string"
                  },
                  "date": {
                    "type": "string"
                  },
                  "speaker": {
                    "type": "string"
                  },
                  "affiliation": {
                    "type": "string"
                  },
                  "location": {
                    "type": "string"
                  },
                  "contentMd": {
                    "type": "string"
                  },
                  "attachmentUrls": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    }
                  },
                  "coverImageId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "세미나 업데이트 성공"
          }
        }
      }
    },
    "/deleteSeminar/{seminarId}": {
      "delete": {
        "summary": "세미나 삭제 (관리자 전용)",
        "parameters": [
          {
            "name": "seminarId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "adminId"
                ],
                "properties": {
                  "adminId": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "세미나 삭제 성공"
          }
        }
      }
    },
    "/recruitApply": {
      "post": {
        "summary": "Recruit - Submit application",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "kaistEmail",
                  "googleEmail",
                  "phone",
                  "department",
                  "studentId",
                  "motivation",
                  "experience",
                  "wantsToDo",
                  "password"
                ],
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "kaistEmail": {
                    "type": "string"
                  },
                  "googleEmail": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "department": {
                    "type": "string"
                  },
                  "studentId": {
                    "type": "string"
                  },
                  "motivation": {
                    "type": "string"
                  },
                  "experience": {
                    "type": "string"
                  },
                  "wantsToDo": {
                    "type": "string"
                  },
                  "githubUsername": {
                    "type": "string"
                  },
                  "portfolioUrl": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "지원서 접수 완료"
          },
          "409": {
            "description": "이미 제출된 지원서"
          }
        }
      }
    },
    "/recruitLogin": {
      "post": {
        "summary": "Recruit - Login",
        "description": "10회 이상 실패 시 15분 잠금 + 임시 비밀번호 이메일 발송",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "kaistEmail",
                  "password"
                ],
                "properties": {
                  "kaistEmail": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그인 성공 (token 반환)"
          },
          "401": {
            "description": "잘못된 자격 증명"
          },
          "423": {
            "description": "계정 잠김"
          }
        }
      }
    },
    "/recruitUpdate": {
      "post": {
        "summary": "Recruit - Update application",
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Bearer {token}"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "googleEmail": {
                    "type": "string"
                  },
                  "phone": {
                    "type": "string"
                  },
                  "department": {
                    "type": "string"
                  },
                  "studentId": {
                    "type": "string"
                  },
                  "motivation": {
                    "type": "string"
                  },
                  "experience": {
                    "type": "string"
                  },
                  "wantsToDo": {
                    "type": "string"
                  },
                  "githubUsername": {
                    "type": "string"
                  },
                  "portfolioUrl": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "업데이트 성공"
          },
          "401": {
            "description": "세션 불일치"
          },
          "403": {
            "description": "모집 기간 아님"
          }
        }
      }
    },
    "/recruitReset": {
      "post": {
        "summary": "Recruit - Request password reset",
        "description": "이메일 존재 여부와 관계없이 항상 성공 응답",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "kaistEmail"
                ],
                "properties": {
                  "kaistEmail": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "임시 비밀번호 발급 (존재 시)"
          }
        }
      }
    },
    "/adminGetApplications": {
      "get": {
        "summary": "Admin Recruit - List applications",
        "parameters": [
          {
            "name": "adminId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 20
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": [
                "submitted",
                "reviewing",
                "accepted",
                "rejected",
                "hold"
              ]
            }
          }
        ],
        "responses": {
          "200": {
            "description": "지원서 목록 반환"
          }
        }
      }
    },
    "/adminUpdateApplicationStatus": {
      "patch": {
        "summary": "Admin Recruit - Update application status",
        "description": "notify=true이고 status가 accepted/rejected일 때 이메일 전송 (템플릿에서 {{name}} 사용 가능)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "adminId",
                  "status",
                  "id"
                ],
                "properties": {
                  "adminId": {
                    "type": "string"
                  },
                  "id": {
                    "type": "string"
                  },
                  "status": {
                    "type": "string",
                    "enum": [
                      "submitted",
                      "reviewing",
                      "accepted",
                      "rejected",
                      "hold"
                    ]
                  },
                  "notify": {
                    "type": "boolean"
                  },
                  "email": {
                    "type": "object",
                    "properties": {
                      "subject": {
                        "type": "string"
                      },
                      "html": {
                        "type": "string"
                      }
                    }
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "상태 업데이트 성공"
          }
        }
      }
    },
    "/adminExportApplications": {
      "get": {
        "summary": "Admin Recruit - Export CSV",
        "parameters": [
          {
            "name": "adminId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "CSV 파일 반환"
          }
        }
      }
    },
    "/loginWithGitHub": {
      "post": {
        "summary": "GitHub OAuth 로그인/회원가입",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "accessToken"
                ],
                "properties": {
                  "accessToken": {
                    "type": "string",
                    "description": "GitHub OAuth access token"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "로그인/회원가입 성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/getUser": {
      "get": {
        "summary": "사용자 정보 조회",
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/checkApprovalStatus": {
      "get": {
        "summary": "승인 상태 확인",
        "parameters": [
          {
            "name": "userId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공"
          }
        }
      }
    },
    "/getPendingUsers": {
      "get": {
        "summary": "승인 대기 중인 사용자 목록 (관리자 전용)",
        "parameters": [
          {
            "name": "adminId",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            }
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50
            }
          },
          {
            "name": "offset",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 0
            }
          }
        ],
        "responses": {
          "200": {
            "description": "성공",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object"
                }
              }
            }
          }
        }
      }
    },
    "/approveUser": {
      "post": {
        "summary": "사용자 승인 (관리자 전용)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId",
                  "adminId"
                ],
                "properties": {
                  "userId": {
                    "type": "string",
                    "description": "승인할 사용자 ID"
                  },
                  "adminId": {
                    "type": "string",
                    "description": "관리자 ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "승인 성공"
          }
        }
      }
    },
    "/rejectUser": {
      "post": {
        "summary": "사용자 거부 (관리자 전용)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId",
                  "adminId"
                ],
                "properties": {
                  "userId": {
                    "type": "string",
                    "description": "거부할 사용자 ID"
                  },
                  "adminId": {
                    "type": "string",
                    "description": "관리자 ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "거부 성공"
          }
        }
      }
    },
    "/grantAdmin": {
      "post": {
        "summary": "관리자 권한 부여 (관리자 전용)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "userId",
                  "adminId"
                ],
                "properties": {
                  "userId": {
                    "type": "string",
                    "description": "관리자 권한을 부여할 사용자 ID"
                  },
                  "adminId": {
                    "type": "string",
                    "description": "관리자 ID"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "권한 부여 성공"
          }
        }
      }
    }
  }
}